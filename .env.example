# =============================================================================
# EatFit24 — ENVIRONMENT VARIABLES (EXAMPLE)
# =============================================================================
# Этот файл — ШАБЛОН.
# Скопируйте его в .env или .env.local и заполните реальными значениями.
# НИКОГДА не коммитьте файлы с реальными секретами.
# =============================================================================


# =============================================================================
# ОБЩЕЕ
# =============================================================================

# Среда выполнения приложения
# dev | prod
APP_ENV=dev

# Локальная среда
ENV=local

# Имя docker-compose проекта (для изоляции окружений)
COMPOSE_PROJECT_NAME=eatfit24_dev

# Включить debug-режим (ТОЛЬКО для dev)
DEBUG=true

# Основной домен проекта
DOMAIN_NAME=localhost


# =============================================================================
# DJANGO — БАЗОВЫЕ НАСТРОЙКИ
# =============================================================================

# Секретный ключ Django
# В DEV можно любой, в PROD — обязательно сложный и уникальный
DJANGO_SECRET_KEY=change-me

# Разрешённые хосты (через запятую)
ALLOWED_HOSTS=localhost,127.0.0.1,backend

# Доверенные источники для CSRF (для фронтенда)
CSRF_TRUSTED_ORIGINS=http://localhost:5173

# Разрешённые домены для CORS
CORS_ALLOWED_ORIGINS=http://localhost:5173

# Модуль настроек Django
DJANGO_SETTINGS_MODULE=config.settings.local


# =============================================================================
# DJANGO — СТАТИКА И МЕДИА
# =============================================================================

STATIC_URL=/static/
STATIC_ROOT=/app/staticfiles

MEDIA_URL=/media/
MEDIA_ROOT=/app/media

# Хранилище статики (WhiteNoise)
STATICFILES_STORAGE=whitenoise.storage.CompressedManifestStaticFilesStorage


# =============================================================================
# БАЗА ДАННЫХ — POSTGRESQL
# =============================================================================

POSTGRES_DB=eatfit24_dev
POSTGRES_USER=eatfit24_dev
POSTGRES_PASSWORD=change-me
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Полный URL БД (если используется)
DATABASE_URL=postgres://eatfit24_dev:change-me@db:5432/eatfit24_dev


# =============================================================================
# REDIS — CACHE + CELERY
# =============================================================================

REDIS_URL=redis://redis:6379/0
DJANGO_CACHE_BACKEND=redis


# =============================================================================
# CELERY
# =============================================================================

CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1
CELERY_TIMEZONE=UTC

# Выполнять задачи синхронно (true — для тестов)
CELERY_TASK_ALWAYS_EAGER=false


# =============================================================================
# AI / LLM
# =============================================================================

# API-ключ OpenAI / OpenRouter
OPENAI_API_KEY=your-openai-key
OPENROUTER_API_KEY=your-openrouter-key

# Включить асинхронную AI-обработку
AI_ASYNC_ENABLED=true

# Лимит AI-запросов в минуту
AI_RATE_LIMIT_PER_MINUTE=60

# AI Proxy
AI_PROXY_URL=http://ai-proxy:8001
AI_PROXY_SECRET=change-me


# =============================================================================
# TELEGRAM BOT
# =============================================================================

# Токен Telegram-бота
TELEGRAM_BOT_TOKEN=your-telegram-bot-token

# ID администраторов Telegram (через запятую)
TELEGRAM_ADMINS=123456789

# URL WebApp (должен быть HTTPS!)
WEB_APP_URL=https://example.com/app

# URL API backend для бота
DJANGO_API_URL=http://backend:8000/api/v1

# Базовый URL панели тренера
TRAINER_PANEL_BASE_URL=https://example.com/app


# =============================================================================
# BILLING — YOOKASSA
# =============================================================================

YOOKASSA_SHOP_ID=your-shop-id
YOOKASSA_SECRET_KEY=your-secret-key
YOOKASSA_MODE=test

# Куда редиректить пользователя после оплаты
YOOKASSA_RETURN_URL=http://localhost:5173/payment-success

# Разрешённые домены для return_url
ALLOWED_RETURN_URL_DOMAINS=localhost,127.0.0.1

# URL webhook (для PROD)
YOOKASSA_WEBHOOK_URL=https://example.com/api/billing/webhook/yookassa/

# Проверять подпись webhook
YOOKASSA_WEBHOOK_VERIFY_SIGNATURE=true

# Рекуррентные платежи
BILLING_RECURRING_ENABLED=false

# Строгий режим биллинга
BILLING_STRICT_MODE=true

# Логировать события оплаты
BILLING_LOG_EVENTS=true


# =============================================================================
# SECURITY
# =============================================================================

SECURE_SSL_REDIRECT=false
SESSION_COOKIE_SECURE=false
CSRF_COOKIE_SECURE=false

SECURE_HSTS_SECONDS=0
SECURE_HSTS_INCLUDE_SUBDOMAINS=false
SECURE_HSTS_PRELOAD=false


# =============================================================================
# API / SWAGGER
# =============================================================================

SWAGGER_ENABLED=true
SWAGGER_AUTH_USERNAME=admin
SWAGGER_AUTH_PASSWORD=admin


# =============================================================================
# СЛУЖЕБНОЕ
# =============================================================================

RUN_MIGRATIONS=1
RUN_COLLECTSTATIC=0
MIGRATIONS_STRICT=1

# Trusted proxies (Docker / reverse proxy)
TRUSTED_PROXIES_ENABLED=true
TRUSTED_PROXIES=172.0.0.0/8,127.0.0.1


# =============================================================================
# TELEGRAM WEBAPP DEBUG
# =============================================================================

WEBAPP_DEBUG_MODE_ENABLED=true
