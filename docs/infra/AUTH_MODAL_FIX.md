# AuthErrorModal Fix

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è **–Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ** (–Ω–µ —á–µ—Ä–µ–∑ Telegram WebApp), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª –Ω–∞–≤—è–∑—á–∏–≤—É—é –º–æ–¥–∞–ª–∫—É:

```
‚ùå –°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞
–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ –∏–∑ Telegram.
–ö–æ–¥ –æ—à–∏–±–∫–∏: 401
[–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å] [–ó–∞–∫—Ä—ã—Ç—å]
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–û—Ç–∫–ª—é—á–∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π `AuthErrorModal` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –¢–µ–ø–µ—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç **—á–∏—Å—Ç—ã–π –æ—Ä–∞–Ω–∂–µ–≤—ã–π –±–∞–Ω–Ω–µ—Ä**:

```
‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram
–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Telegram.
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ".
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –§–∞–π–ª: `frontend/src/App.tsx`

**–î–æ:**
```tsx
<ToastProvider>
  {/* –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401/403) */}
  <AuthErrorModal />
  <OfflineIndicator />
```

**–ü–æ—Å–ª–µ:**
```tsx
<ToastProvider>
  {/* –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401/403) - DISABLED */}
  {/* Pages show "Open via Telegram" message instead of modal */}
  <OfflineIndicator />
```

---

## üé® UX –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –î–æ | –ü–æ—Å–ª–µ |
|----------|-----|--------|
| –ë—Ä–∞—É–∑–µ—Ä (–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø) | ‚ùå –ú–æ–¥–∞–ª–∫–∞ —Å 401 –æ—à–∏–±–∫–æ–π | ‚úÖ –ß–∏—Å—Ç—ã–π –±–∞–Ω–Ω–µ—Ä "–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram" |
| –ß–µ—Ä–µ–∑ Telegram WebApp | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| Dev —Ä–µ–∂–∏–º (localhost) | ‚úÖ Mock Telegram | ‚úÖ Mock Telegram |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. Production (eatfit24.ru/app)

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://eatfit24.ru/app/profile`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—Ä–∞–Ω–∂–µ–≤—ã–π –±–∞–Ω–Ω–µ—Ä —Å —Ç–µ–∫—Å—Ç–æ–º "–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram"
- ‚úÖ –ù–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ "–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞"
- ‚úÖ –ß–∏—Å—Ç—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω

### 2. Via Telegram WebApp

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram Desktop/Mobile
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 401
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è

### 3. Dev —Ä–µ–∂–∏–º (localhost:5173)

```bash
cd frontend && npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:5173/app`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Mock Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö—Ä–∞—Å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä "DEBUG MODE"
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ—á–µ–º—É AuthErrorModal –±—ã–ª –ø—Ä–æ–±–ª–µ–º–æ–π?

1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–ª—Å—è –Ω–∞ –≤—Å–µ 401/403 –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `onAuthError`
2. **–ù–∞–≤—è–∑—á–∏–≤–∞—è –º–æ–¥–∞–ª–∫–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
3. **–î–≤–æ–π–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:** –°—Ç—Ä–∞–Ω–∏—Ü—ã –£–ñ–ï –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –±–∞–Ω–Ω–µ—Ä, –Ω–æ –º–æ–¥–∞–ª–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–ª–∞ —ç—Ç–æ

### –ü–æ—á–µ–º—É –±–∞–Ω–Ω–µ—Ä –ª—É—á—à–µ?

1. ‚úÖ **–ù–∞—Ç–∏–≤–Ω—ã–π –≤–∏–¥:** –û—Ä–∞–Ω–∂–µ–≤—ã–π –±–∞–Ω–Ω–µ—Ä –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —á–∞—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
2. ‚úÖ **–ë–µ–∑ overlay:** –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω
3. ‚úÖ **–û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã:** –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∞–º–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç —Å–≤–æ–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
4. ‚úÖ **–õ—É—á—à–∏–π UX:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∞ –Ω–µ "–æ—à–∏–±–∫—É"

---

## üì¶ –ö–æ–º–º–∏—Ç

```
adee025 - fix(frontend): disable AuthErrorModal - show clean Telegram prompt instead
```

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:**
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ `<AuthErrorModal />` –≤ App.tsx
- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- Production build —É—Å–ø–µ—à–µ–Ω

---

## üöÄ –î–µ–ø–ª–æ–π

1. **–ë–∏–ª–¥:**
   ```bash
   cd frontend && npm run build
   ```

2. **–î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   ssh root@eatfit24.ru
   cd /opt/EatFit24
   git pull origin main
   cd frontend && npm run build
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `eatfit24.ru/app/profile` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–π –±–∞–Ω–Ω–µ—Ä, –ë–ï–ó –º–æ–¥–∞–ª–∫–∏

---

## ‚ú® –ò—Ç–æ–≥

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|--------|
| –ú–æ–¥–∞–ª–∫–∞ "–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞" | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è | –û—Ç–∫–ª—é—á–µ–Ω–∞ |
| –ë–∞–Ω–Ω–µ—Ä "–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram" | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è |
| UX –ø—Ä–∏ –ø—Ä—è–º–æ–º –¥–æ—Å—Ç—É–ø–µ | –ü–ª–æ—Ö–æ–π (–º–æ–¥–∞–ª–∫–∞) | –•–æ—Ä–æ—à–∏–π (–±–∞–Ω–Ω–µ—Ä) |
| –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ Telegram | ‚úÖ | ‚úÖ |

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!** üéâ
